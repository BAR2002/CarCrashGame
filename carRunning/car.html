<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<style> 
</style>

<body>
    <canvas id="canvas" width="1300" height="450"></canvas>
    <button onclick="moveUp()">UP</button>
    <button onclick="moveDown()">DOWN</button>
    <button onclick="moveRight()">RIGHT</button>
    <button onclick="moveLeft()">LEFT</button>
    <script>
        const yourScore = document.getElementById('score');
        let points = 0;

        const canvas = document.getElementById('canvas');
        const canvasMethod = canvas.getContext('2d');

        const carImage = new Image();
        carImage.src = 'car.png';

        const truckImage = new Image();
        truckImage.src = 'truck.png';

        let carX = 100;
        let carY = 250;
        let truck1X = canvas.width;
        let truck2X = canvas.width + 700;
        let truck1Y = 160;
        let truck2Y = 250;
        let isCarMoving = true;
        let isCrashed = true;

        function moveUp() {
            carY = carY - 10;
        }

        function moveDown() {
            carY = carY + 10;
        }

        function moveRight() {
            carX = carX + 5;
        }

        function moveLeft() {
            carX = carX - 5;
        }

        function draw(x, y, image, width, height) {
            canvasMethod.drawImage(image, x, y, width, height);
        }

        function printScore() {
            canvasMethod.font = "20px Arial";
            canvasMethod.fillStyle = "black";
            canvasMethod.fillText('Score: ' + points, 20, 30);
        }

        function gameOver() {
            canvasMethod.font = "50px Arial";
            canvasMethod.fillStyle = "red";
            canvasMethod.fillText('YOU LOSE!', canvas.width / 2 - 150, canvas.height / 2)
        }

        function showFinalScore() {
            canvasMethod.font = "30px Arial";
            canvasMethod.fillStyle = "red";
            canvasMethod.fillText('Total Score: ' + points, canvas.width / 2 -100, canvas.height / 2 + 50);
        }

        function checkCrash() {
            if (carX + 150 > truck1X && carX < truck1X + 100 &&
                carY < truck1Y + 100 && carY + 80 > truck1Y) {
                isCrashed = false;
                gameOver();
                showFinalScore();
            }

            if (carX + 150 > truck2X && carX < truck2X + 100 &&
                carY < truck2Y + 100 && carY + 80 > truck2Y) {
                isCrashed = false;
                gameOver();
                showFinalScore();
            }

            if (carX > truck1X && carX < truck1X + 200 && isCarMoving){
                points++;
                printScore();
                isCarMoving = false;
            }

            if (carX > truck2X && carX < truck2X + 200  && isCarMoving) {
                points++;
                printScore();
                isCarMoving = false;
            }
        }

        function startCar() {
            if (isCrashed) {

                canvasMethod.clearRect(0, 0, canvas.width, canvas.height);

                truck1X -= 2;
                if (truck1X < -150) {
                    truck1X = canvas.width;
                    truck1Y = Math.floor(Math.random() * 350);
                    isCarMoving = true;
                }

                truck2X -= 2;
                if (truck2X < -150) {
                    truck2X = canvas.width;
                    truck2Y = Math.floor(Math.random() * 350);
                    isCarMoving = true;
                }

                checkCrash();

                draw(truck1X, truck1Y, truckImage, 200, 150);
                draw(truck2X, truck2Y, truckImage, 200, 150);
                draw(carX, carY, carImage, 200, 150);
                printScore();
            }
        }

        carImage.onload = function () {
            setInterval(startCar, 16);
        }
    </script>
</body>

</html>